---
import Layout from '../layouts/Layout.astro';
import { t, type Locale } from '../i18n/utils';

interface Props {
	lang: Locale;
}

const { lang } = Astro.props;

type LocaleText = Record<Locale, string>;

interface Project {
	client: string;
	name: string;
	period: string;
	role: LocaleText;
	description: LocaleText;
	tech: string[];
	logo: { src: string; alt: string };
}

const projects: Project[] = [
	{
		client: 'Visma Software',
		name: 'Periode & År',
		period: 'Sep 2022 – Jun 2025',
		role: {
			en: 'Full-stack Developer',
			no: 'Full-stack utvikler',
			fr: 'Développeur full-stack',
		},
		description: {
			en: 'Full-stack development on the transition of the on-premise accounting tool Finale to the SaaS product Periode & År, serving tax professionals. Built complex tax form submission via Skatteetaten\'s REST API, reactive Angular frontend with Signals and Observables, and backend calculations synchronized to the frontend.',
			no: 'Full-stack utvikling på overgangen av regnskapsprogrammet Finale til SaaS-produktet Periode & År for regnskapsførere. Bygde komplekse skatteskjemaer via Skatteetatens REST API, reaktiv Angular-frontend med Signals og Observables, og backend-kalkulasjoner synkronisert til frontend.',
			fr: 'Développement full-stack sur la transition de l\'outil comptable Finale vers le produit SaaS Periode & År. Développement de formulaires fiscaux complexes via l\'API REST de Skatteetaten, frontend Angular réactif avec Signals et Observables, et calculs backend synchronisés avec le frontend.',
		},
		tech: ['Angular', 'C#', '.NET', 'TypeScript', 'SQL Server', 'Azure', 'Entity Framework', 'NX monorepo', 'Azure AppInsights', 'TeamCity'],
		logo: { src: '/logos/visma.png', alt: 'Visma Software' },
	},
	{
		client: 'Norsk Helsenett',
		name: 'HelseID Selvbetjening',
		period: 'Aug 2020 – Jun 2022',
		role: {
			en: 'Full-stack Developer, Security Champion',
			no: 'Full-stack utvikler, Security Champion',
			fr: 'Développeur full-stack, Security Champion',
		},
		description: {
			en: 'Self-service portal for configuring HelseID authentication — Norway\'s shared login solution for the healthcare sector. Built with Web Components/Lit, ASP.NET Core BFF and backend, Kubernetes on Azure with Terraform and Helm, and automated security testing with OWASP ZAP and SonarQube. Also served as voluntary Security Champion.',
			no: 'Selvbetjeningsportal for å konfigurere HelseID-autentisering — felles påloggingsløsning for helse- og omsorgssektoren. Bygde med Web Components/Lit, ASP.NET Core BFF og backend, Kubernetes på Azure med Terraform og Helm, og automatisk sikkerhetstesting med OWASP ZAP og SonarQube. Hadde også frivillig rolle som Security Champion.',
			fr: 'Portail en libre-service pour configurer l\'authentification HelseID, solution commune de connexion pour le secteur de la santé norvégien. Développé avec Web Components/Lit, ASP.NET Core BFF et backend, Kubernetes sur Azure avec Terraform et Helm, et tests de sécurité automatisés avec OWASP ZAP et SonarQube. Rôle volontaire de Security Champion.',
		},
		tech: ['Web Components', 'Lit', 'ASP.NET Core', 'Azure Kubernetes Service', 'Terraform', 'Helm', 'OIDC', 'OAuth 2.0', 'Azure Cosmos DB', 'Docker', 'SonarQube', 'OWASP'],
		logo: { src: '/logos/nhn.png', alt: 'Norsk Helsenett' },
	},
	{
		client: 'Statens lånekasse for utdanning',
		name: 'Lånekassen',
		period: 'Aug 2018 – Jun 2020',
		role: {
			en: 'Team Lead, Tech Lead, Full-stack Developer',
			no: 'Team lead, Tech lead, Full-stack utvikler',
			fr: 'Team Lead, Tech Lead, Développeur full-stack',
		},
		description: {
			en: 'Multiple projects for Norway\'s Student Loan Fund. Led a team of 7 building the new accessible lånekassen.no (EPiServer, React, WCAG 2.1). Also built an adult education dialog integrating with UDIR\'s Grep database, and a degree conversion page in the customer portal DineSider.',
			no: 'Flere prosjekter for Lånekassen. Ledet team på 7 i bygging av nye lånekassen.no (EPiServer, React, WCAG 2.1). Bygde også dialog for voksenopplæring med integrasjon mot UDIRs Grep-database, og gradsomgjøringsside i kundeportalen DineSider.',
			fr: 'Plusieurs projets pour le Fonds norvégien de prêts étudiants. Direction d\'une équipe de 7 pour le nouveau lånekassen.no (EPiServer, React, WCAG 2.1). Développement d\'un dialogue pour la formation des adultes avec la base Grep d\'UDIR, et d\'une page de conversion de prêt dans le portail DineSider.',
		},
		tech: ['React', 'TypeScript', 'ASP.NET', 'ASP.NET Core', 'EPiServer', 'Entity Framework Core', 'Azure', 'Azure DevOps', 'WCAG 2.1', 'SPARQL', 'SQL Server', 'C#'],
		logo: { src: '/logos/lanekassen.png', alt: 'Statens lånekasse for utdanning' },
	},
	{
		client: 'Norsk Helsenett',
		name: 'MF Helse Dødsmelding',
		period: 'Jan 2018 – Jun 2018',
		role: {
			en: 'System Developer',
			no: 'Systemutvikler',
			fr: 'Développeur système',
		},
		description: {
			en: 'Part of a 3-person team digitizing death notifications as part of Norway\'s national registry modernization, replacing paper forms with a digital solution integrated with Skatteetaten. Built Angular frontend with HelseID authentication, message processing service bus, and automated Selenium tests.',
			no: 'Del av team på 3 som digitaliserte dødsmeldinger som del av moderniseringen av folkeregisteret, med integrasjon mot Skatteetaten. Bygde Angular-frontend med HelseID-autentisering, meldingsbehandlingsservice og automatiske Selenium-tester.',
			fr: 'Participation à une équipe de 3 pour numériser les déclarations de décès dans le cadre de la modernisation du registre national norvégien. Développement d\'un frontend Angular avec authentification HelseID, service de traitement de messages, et tests Selenium automatisés.',
		},
		tech: ['Angular', 'ASP.NET Core', 'HelseID', 'OIDC', 'Entity Framework Core', 'Azure', 'SonarQube', 'Selenium', 'TypeScript', 'C#'],
		logo: { src: '/logos/nhn.png', alt: 'Norsk Helsenett' },
	},
	{
		client: 'Equinor ASA',
		name: 'STEA',
		period: 'May 2012 – Dec 2017',
		role: {
			en: 'System Developer / Architect',
			no: 'Systemutvikler / Systemarkitekt',
			fr: 'Développeur / Architecte système',
		},
		description: {
			en: 'Long-term development of STEA, Equinor\'s economic analysis tool for modelling oil and gas project profitability. Built WPF modules, calculation engines, sensitivity analysis, stochastic simulations, and a repository for model versioning with REST API and Active Directory authentication.',
			no: 'Langsiktig utvikling av STEA, Equinors verktøy for økonomisk analyse av olje- og gassprosjekter. Bygde WPF-moduler, beregningskjerner, sensitivitetsanalyse, stokastiske simuleringer og et repository for modellversjonering med REST API og Active Directory-autentisering.',
			fr: 'Développement à long terme de STEA, l\'outil d\'analyse économique d\'Equinor pour la modélisation de la rentabilité des projets pétroliers et gaziers. Développement de modules WPF, moteurs de calcul, analyse de sensibilité, simulations stochastiques et un dépôt de versionnement avec REST API et authentification Active Directory.',
		},
		tech: ['C#', '.NET', 'WPF', 'Entity Framework', 'REST API', 'OAuth 2.0', 'TDD', 'FitNesse', 'SpreadsheetGear', 'TeamCity'],
		logo: { src: '/logos/equinor.svg', alt: 'Equinor ASA' },
	},
];

---

<Layout title={t(lang, 'home.title')} lang={lang}>
	<section class="hero">
		<div class="hero-header">
			<h1>{t(lang, 'home.greeting')} <span class="name">{t(lang, 'home.name')}</span></h1>
			<button class="theme-toggle" type="button" aria-label="Toggle dark mode">
				<svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="4.22" x2="19.78" y2="5.64"/></svg>
				<svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
			</button>
		</div>
		<p class="tagline">{t(lang, 'home.tagline')}</p>
	</section>

	<section>
		<h2>{t(lang, 'resume.coreSkills')}</h2>
		<ul class="skills">
			<li>.NET / C#</li>
			<li>ASP.NET Core</li>
			<li>Entity Framework</li>
			<li>TypeScript</li>
			<li>JavaScript</li>
			<li>Angular</li>
			<li>React</li>
			<li>HTML &amp; CSS</li>
			<li>SQL Server</li>
			<li>Azure</li>
			<li>Kubernetes</li>
			<li>Docker</li>
		</ul>
	</section>

	{/* <section>
		<h2>{t(lang, 'resume.experience')}</h2>

		<div class="entry">
			<img class="entry-logo fink-logo" src="/logos/fink.png" alt="Fink AS" />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">Fink AS</h3>
					<span class="date-tag">Jan 2026 &ndash; {t(lang, 'resume.present')}</span>
				</div>
				<span class="meta">{t(lang, 'resume.seniorConsultant')}</span>
				<p class="location">Oslo, Norway &middot; {t(lang, 'resume.hybrid')}</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/wannebo.svg" alt="Wannebo Consulting" />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">Wannebo Consulting</h3>
					<span class="date-tag">Aug 2022 &ndash; Dec 2025</span>
				</div>
				<span class="meta">{t(lang, 'resume.seniorConsultant')}</span>
				<p class="location">Lyon, France &middot; {t(lang, 'resume.remote')}</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/webstep.png" alt="Webstep" />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">Webstep</h3>
					<span class="date-tag">Jul 2020 &ndash; Aug 2022</span>
				</div>
				<span class="meta">{t(lang, 'resume.seniorConsultant')}</span>
				<p class="location">Trondheim, Norway &middot; {t(lang, 'resume.hybrid')}</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/inmeta.png" alt="Inmeta" />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">Inmeta</h3>
					<span class="date-tag">Jan 2018 &ndash; Jun 2020</span>
				</div>
				<span class="meta">{t(lang, 'resume.consultant')}</span>
				<p class="location">Trondheim, Norway</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/comsol.png" alt="COMSOL, Inc." />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">COMSOL, Inc.</h3>
					<span class="date-tag">May 2012 &ndash; Dec 2017</span>
				</div>
				<span class="meta">{t(lang, 'resume.softwareEngineer')}</span>
				<p class="location">Trondheim, Norway</p>
			</div>
		</div>
	</section> */}

	<section>
		<h2>{t(lang, 'resume.projects')}</h2>
		{projects.map((project) => (
			<div class="entry">
				<img class="entry-logo" src={project.logo.src} alt={project.logo.alt} />
				<div class="entry-content">
					<div class="entry-header">
						<h3 class="entry-name">{project.client}<span class="entry-sub">{project.name}</span></h3>
						<span class="date-tag">{project.period}</span>
					</div>
					<span class="meta">{project.role[lang]}</span>
					<p class="entry-description">{project.description[lang]}</p>
					<ul class="entry-tech">
						{project.tech.map((tag) => <li>{tag}</li>)}
					</ul>
				</div>
			</div>
		))}
	</section>

	<section>
		<h2>{t(lang, 'resume.education')}</h2>
		<div class="entry">
			<img class="entry-logo" src="/logos/ntnu.svg" alt="NTNU" />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">NTNU</h3>
					<span class="date-tag">2014 &ndash; 2017</span>
				</div>
				<span class="meta">M.Sc. Computer Science</span>
			</div>
		</div>
		<div class="entry">
			<img class="entry-logo" src="/logos/ntnu.svg" alt="H&oslash;gskolen i S&oslash;r-Tr&oslash;ndelag" />
			<div class="entry-content">
				<div class="entry-header">
					<h3 class="entry-name">H&oslash;gskolen i S&oslash;r-Tr&oslash;ndelag</h3>
					<span class="date-tag">2009 &ndash; 2012</span>
				</div>
				<span class="meta">B.Sc. Computer Science</span>
			</div>
		</div>
	</section>

	<section class="about">
		<h2>{t(lang, 'about.heading')}</h2>
		<p>{t(lang, 'about.p1')}</p>
		<p>{t(lang, 'about.p2')}</p>
	</section>

	<section>
		<h2>{t(lang, 'about.contact')}</h2>
		<ul class="contact-links">
			<li><a href="mailto:kristian@fink.no">{t(lang, 'about.email')}</a></li>
			<li><a href="https://www.linkedin.com/in/kristian-wannebo-b4a554b5/">{t(lang, 'about.linkedin')}</a></li>
		</ul>
	</section>
</Layout>

<style>
	/* Hero */
	.hero {
		padding: 2rem 0 0;
		max-width: 720px;
		width: 100%;
		margin-left: auto;
		margin-right: auto;
	}

	.hero-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	h1 {
		font-size: 2.5rem;
		margin: 0;
	}

	.name {
		color: var(--color-primary);
	}

	.tagline {
		font-size: 1.25rem;
		color: var(--color-text);
	}

	/* Theme toggle */
	.theme-toggle {
		background: none;
		border: none;
		cursor: pointer;
		color: var(--color-heading);
		padding: 0.25rem;
		display: flex;
		align-items: center;
		flex-shrink: 0;
	}

	.theme-toggle:hover {
		color: var(--color-primary);
	}

	/* Sections */
	section {
		max-width: 720px;
		width: 100%;
		margin-left: auto;
		margin-right: auto;
		margin-bottom: 4rem;
	}

	h2 {
		font-size: 1.25rem;
		border-bottom: 1px solid var(--color-border);
		padding-bottom: 0.25rem;
		margin-bottom: 1rem;
	}

	/* About */
	.about p {
		line-height: 1.7;
		color: var(--color-text);
	}

	.about h3 {
		font-size: 1.1rem;
	}

	.contact-links {
		list-style: none;
		padding: 0;
		display: flex;
		gap: 1.5rem;
	}

	.contact-links a {
		color: var(--color-primary);
		text-decoration: none;
	}

	.contact-links a:hover {
		text-decoration: underline;
	}

	/* Skills */
	.skills {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		list-style: none;
		padding: 0;
	}

	.skills li {
		padding: 0.25rem 0.75rem;
		background: var(--color-surface);
		border-radius: 4px;
		font-size: 0.875rem;
	}

	/* Entries (Experience, Education, Projects) */
	.entry {
		display: flex;
		gap: 0.75rem;
		margin-bottom: 2.5rem;
	}

	.entry-logo {
		width: 32px;
		height: 32px;
		object-fit: contain;
		border-radius: 4px;
		flex-shrink: 0;
		align-self: flex-start;
		margin-top: 0.75rem;
	}

	[data-theme="dark"] .fink-logo {
		filter: invert(1);
	}

	@media (prefers-color-scheme: dark) {
		:root:not([data-theme="light"]) .fink-logo {
			filter: invert(1);
		}
	}

	.entry-name {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 1rem;
		margin: 0;
		font-weight: 600;
	}

	.meta {
		display: block;
		font-weight: normal;
		color: var(--color-primary);
		margin-bottom: 0.25rem;
	}

	.date-tag {
		display: inline-block;
		padding: 0.15rem 0.6rem;
		background: var(--color-surface);
		border-radius: 4px;
		font-size: 0.8125rem;
		color: var(--color-text);
		font-weight: normal;
		vertical-align: middle;
	}

	.location {
		font-size: 0.875rem;
		color: var(--color-text);
		margin: 0.125rem 0 0;
	}

	.entry p {
		color: var(--color-text);
		margin: 0 0 0.5rem;
		line-height: 1.6;
	}

	.entry p:last-child {
		margin-bottom: 0;
	}

	.entry-content {
		width: 100%;
	}

	.entry-content > *:last-child {
		margin-bottom: 0;
	}

	.entry-header {
		display: flex;
		justify-content: space-between;
		align-items: flex-start;
		gap: 0.75rem;
		margin: 1rem 0 0.25rem;
		flex-wrap: wrap;
		width: 100%;
	}

	.entry-sub {
		font-weight: normal;
		color: var(--color-primary);
		margin-left: 0.5rem;
	}

	.entry-description {
		color: var(--color-text);
		line-height: 1.6;
		margin: 0.25rem 0 0.75rem;
		font-size: 0.9375rem;
	}

	.entry-tech {
		display: flex;
		flex-wrap: wrap;
		gap: 0.375rem;
		list-style: none;
		padding: 0;
		margin: 0;
	}

	.entry-tech li {
		padding: 0.15rem 0.6rem;
		background: var(--color-surface);
		border-radius: 4px;
		font-size: 0.8125rem;
		color: var(--color-text);
	}
</style>
