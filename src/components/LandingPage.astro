---
import Layout from '../layouts/Layout.astro';
import { t, getLocalePath, locales, type Locale } from '../i18n/utils';

interface Props {
	lang: Locale;
}

const { lang } = Astro.props;

const currentPath = Astro.url.pathname;
const basePath = lang === 'en'
	? currentPath
	: currentPath.replace(`/${lang}`, '') || '/';

const localeToFlag: Record<Locale, string> = {
	en: 'gb',
	no: 'no',
	fr: 'fr',
};
---

<Layout title={t(lang, 'home.title')} lang={lang}>
	<section class="hero">
		<div class="hero-header">
			<h1>{t(lang, 'home.greeting')} <span class="name">{t(lang, 'home.name')}</span></h1>
			<div class="toolbar">
				<button class="theme-toggle" type="button" aria-label="Toggle dark mode">
					<svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="4.22" x2="19.78" y2="5.64"/></svg>
					<svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
				</button>
				<div class="lang-switcher">
					{locales.map((locale) => (
						<a
							href={getLocalePath(locale, basePath)}
							class:list={[{ active: locale === lang }]}
							aria-label={t(lang, `lang.${locale}` as any)}
						>
							<span class={`fi fi-${localeToFlag[locale]}`}></span>
						</a>
					))}
				</div>
			</div>
		</div>
		<p class="tagline">{t(lang, 'home.tagline')}</p>
	</section>

	<section>
		<h2>{t(lang, 'resume.coreSkills')}</h2>
		<ul class="skills">
			<li>.NET / C#</li>
			<li>ASP.NET Core</li>
			<li>Entity Framework</li>
			<li>TypeScript</li>
			<li>JavaScript</li>
			<li>Angular</li>
			<li>React</li>
			<li>HTML &amp; CSS</li>
			<li>SQL Server</li>
			<li>Azure</li>
			<li>Kubernetes</li>
			<li>Docker</li>
		</ul>
	</section>

	<section>
		<h2>{t(lang, 'resume.experience')}</h2>

		<div class="entry">
			<img class="entry-logo fink-logo" src="/logos/fink.png" alt="Fink AS" />
			<div class="entry-content">
				<h3>Fink AS <span class="date-tag">Jan 2026 &ndash; {t(lang, 'resume.present')}</span></h3>
				<span class="meta">{t(lang, 'resume.seniorConsultant')}</span>
				<p class="location">Oslo, Norway &middot; {t(lang, 'resume.hybrid')}</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/wannebo.svg" alt="Wannebo Consulting" />
			<div class="entry-content">
				<h3>Wannebo Consulting <span class="date-tag">Aug 2022 &ndash; Dec 2025</span></h3>
				<span class="meta">{t(lang, 'resume.seniorConsultant')}</span>
				<p class="location">Lyon, France &middot; {t(lang, 'resume.remote')}</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/webstep.png" alt="Webstep" />
			<div class="entry-content">
				<h3>Webstep <span class="date-tag">Jul 2020 &ndash; Aug 2022</span></h3>
				<span class="meta">{t(lang, 'resume.seniorConsultant')}</span>
				<p class="location">Trondheim, Norway &middot; {t(lang, 'resume.hybrid')}</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/inmeta.png" alt="Inmeta" />
			<div class="entry-content">
				<h3>Inmeta <span class="date-tag">Jan 2018 &ndash; Jun 2020</span></h3>
				<span class="meta">{t(lang, 'resume.consultant')}</span>
				<p class="location">Trondheim, Norway</p>
			</div>
		</div>

		<div class="entry">
			<img class="entry-logo" src="/logos/comsol.png" alt="COMSOL, Inc." />
			<div class="entry-content">
				<h3>COMSOL, Inc. <span class="date-tag">May 2012 &ndash; Dec 2017</span></h3>
				<span class="meta">{t(lang, 'resume.softwareEngineer')}</span>
				<p class="location">Trondheim, Norway</p>
			</div>
		</div>
	</section>

	<section>
		<h2>{t(lang, 'resume.education')}</h2>
		<div class="entry">
			<img class="entry-logo" src="/logos/ntnu.svg" alt="NTNU" />
			<div class="entry-content">
				<h3>NTNU <span class="date-tag">2014 &ndash; 2017</span></h3>
				<span class="meta">M.Sc. Computer Science</span>
			</div>
		</div>
		<div class="entry">
			<img class="entry-logo" src="/logos/ntnu.svg" alt="H&oslash;gskolen i S&oslash;r-Tr&oslash;ndelag" />
			<div class="entry-content">
				<h3>H&oslash;gskolen i S&oslash;r-Tr&oslash;ndelag <span class="date-tag">2009 &ndash; 2012</span></h3>
				<span class="meta">B.Sc. Computer Science</span>
			</div>
		</div>
	</section>

	<section class="about">
		<h2>{t(lang, 'about.heading')}</h2>
		<p>{t(lang, 'about.p1')}</p>
		<p>{t(lang, 'about.p2')}</p>

		<h3>{t(lang, 'about.contact')}</h3>
		<ul class="contact-links">
			<li><a href="mailto:kristian@fink.no">{t(lang, 'about.email')}</a></li>
<li><a href="https://www.linkedin.com/in/kristian-wannebo-b4a554b5/">{t(lang, 'about.linkedin')}</a></li>
		</ul>
	</section>
</Layout>

<style>
	/* Hero */
	.hero {
		padding: 2rem 0 0;
		max-width: 720px;
		width: 100%;
		margin-left: auto;
		margin-right: auto;
	}

	.hero-header {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	h1 {
		font-size: 2.5rem;
		margin-bottom: 0.5rem;
	}

	.name {
		color: var(--color-primary);
	}

	.tagline {
		font-size: 1.25rem;
		color: var(--color-text);
	}

	/* Toolbar */
	.toolbar {
		display: flex;
		align-items: center;
		flex-shrink: 0;
	}

	.theme-toggle {
		background: none;
		border: none;
		cursor: pointer;
		color: var(--color-heading);
		padding: 0.25rem;
		display: flex;
		align-items: center;
	}

	.theme-toggle:hover {
		color: var(--color-primary);
	}

	.lang-switcher {
		display: flex;
		gap: 0.5rem;
		margin-left: 0.75rem;
	}

	.lang-switcher a {
		display: flex;
		opacity: 0.5;
		transition: opacity 0.15s;
	}

	.lang-switcher a:hover {
		opacity: 0.8;
		text-decoration: none;
	}

	.lang-switcher a.active {
		opacity: 1;
	}

	/* Sections */
	section {
		max-width: 720px;
		width: 100%;
		margin-left: auto;
		margin-right: auto;
		margin-bottom: 4rem;
	}

	h2 {
		font-size: 1.25rem;
		border-bottom: 1px solid var(--color-border);
		padding-bottom: 0.25rem;
		margin-bottom: 1rem;
	}

	/* About */
	.about p {
		line-height: 1.7;
		color: var(--color-text);
	}

	.about h3 {
		font-size: 1.1rem;
	}

	.contact-links {
		list-style: none;
		padding: 0;
		display: flex;
		gap: 1.5rem;
	}

	.contact-links a {
		color: var(--color-primary);
		text-decoration: none;
	}

	.contact-links a:hover {
		text-decoration: underline;
	}

	/* Skills */
	.skills {
		display: flex;
		flex-wrap: wrap;
		gap: 0.5rem;
		list-style: none;
		padding: 0;
	}

	.skills li {
		padding: 0.25rem 0.75rem;
		background: var(--color-surface);
		border-radius: 4px;
		font-size: 0.875rem;
	}

	/* Experience & Education entries */
	.entry {
		display: flex;
		gap: 0.75rem;
		margin-bottom: 1.75rem;
	}

	.entry-logo {
		width: 32px;
		height: 32px;
		object-fit: contain;
		border-radius: 4px;
		flex-shrink: 0;
		align-self: flex-start;
		margin-top: 0.75rem;
	}

	[data-theme="dark"] .fink-logo {
		filter: invert(1);
	}

	@media (prefers-color-scheme: dark) {
		:root:not([data-theme="light"]) .fink-logo {
			filter: invert(1);
		}
	}

	.entry h3 {
		display: flex;
		align-items: center;
		gap: 0.5rem;
		font-size: 1rem;
		margin-bottom: 0.25rem;
	}

	.meta {
		display: block;
		font-weight: normal;
		color: var(--color-secondary);
		margin-bottom: 0.25rem;
	}

	.date-tag {
		display: inline-block;
		padding: 0.15rem 0.6rem;
		background: var(--color-surface);
		border-radius: 4px;
		font-size: 0.8125rem;
		color: var(--color-text);
		font-weight: normal;
		vertical-align: middle;
	}

	.location {
		font-size: 0.875rem;
		color: var(--color-text);
		margin: 0.125rem 0 0;
	}

	.entry p {
		color: var(--color-text);
		margin: 0 0 0.5rem;
		line-height: 1.6;
	}
</style>
